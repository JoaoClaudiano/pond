<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=yes">
    <title>PonderaCivil · Aprenda e simule</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:opsz,wght@14..32,400;14..32,500;14..32,600;14..32,700&display=swap" rel="stylesheet">
    <!-- Feather Icons -->
    <script src="https://unpkg.com/feather-icons"></script>
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <!-- SheetJS (XLSX) -->
    <script src="https://cdn.sheetjs.com/xlsx-0.20.2/package/dist/xlsx.full.min.js"></script>
    <!-- html2canvas e jsPDF (para PDF, opcional, mas mantido) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.29/jspdf.plugin.autotable.min.js"></script>
    <!-- Nosso CSS -->
    <link rel="stylesheet" href="css/style.css">
    <!-- Intro.js para tour -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/intro.js@5.1.0/minified/introjs.min.css">
    <script src="https://cdn.jsdelivr.net/npm/intro.js@5.1.0/minified/intro.min.js"></script>
</head>
<body>
    <div class="app-container">
        <header>
            <h1><i data-feather="layers"></i> Pondera<span class="accent">Civil</span></h1>
            <p class="subtitle">Decisões técnicas com clareza e método</p>
            <button id="start-tour" class="btn btn-secondary" style="margin-top: 0.5rem;" title="Tour guiado pelo site"><i data-feather="compass"></i> Tour</button>
        </header>

        <!-- Abas -->
        <div class="tabs">
            <button class="tab-btn active" id="tab-learn"><i data-feather="book-open"></i> Aprender</button>
            <button class="tab-btn" id="tab-simulator"><i data-feather="tool"></i> Simulador</button>
            <button class="tab-btn" id="tab-guide"><i data-feather="help-circle"></i> Guia de Uso</button>
            <button class="tab-btn" id="tab-examples"><i data-feather="folder"></i> Exemplos</button>
        </div>

        <!-- Conteúdo da aba Aprender -->
        <div id="learn-content" class="tab-content active">
            <section class="learn-section">
                <h2>O que é o método da pontuação ponderada?</h2>
                <p>É uma técnica de análise multicritério que ajuda a escolher a melhor opção quando vários fatores (às vezes conflitantes) precisam ser considerados. Na engenharia civil, é muito usado para selecionar terrenos, materiais, fornecedores ou alternativas de projeto.</p>
                
                <div class="card">
                    <h3><i data-feather="scale"></i> Pesos: a importância de cada critério</h3>
                    <p>Os pesos representam o quanto cada critério é importante para você. A soma de todos os pesos deve ser <strong>100%</strong>. Por exemplo, se o preço é muito importante, pode ter peso 40%; se a localização é menos relevante, 10%.</p>
                    <p><em>Dica: Use a experiência da equipe ou dados históricos para definir pesos realistas.</em></p>
                </div>

                <div class="card">
                    <h3><i data-feather="star"></i> Notas: avaliando cada opção</h3>
                    <p>Para cada critério, dê uma nota de <strong>0 a 10</strong> para cada terreno/opção. 0 significa péssimo, 10 significa excelente. As notas devem ser baseadas em dados objetivos (ex: custo por m²) ou em avaliações técnicas (ex: tipo de solo).</p>
                </div>

                <div class="card">
                    <h3><i data-feather="calculator"></i> Cálculo da pontuação final</h3>
                    <p>Multiplica-se a nota de cada critério pelo seu peso (em decimal) e soma-se tudo. A opção com maior pontuação é a mais alinhada com suas prioridades.</p>
                    <p><strong>Exemplo:</strong> Se o critério "Preço" tem peso 30% e nota 8, contribui com 0,3 × 8 = 2,4 pontos na soma final.</p>
                </div>

                <div class="card">
                    <h3><i data-feather="bar-chart-2"></i> Interpretando os resultados</h3>
                    <p>O gráfico de barras mostra a pontuação final de cada terreno. O gráfico radar (teia) permite comparar o desempenho em cada critério — útil para identificar pontos fortes e fracos.</p>
                </div>

                <div class="card">
                    <h3><i data-feather="home"></i> Aplicações na engenharia civil</h3>
                    <ul>
                        <li>Escolha de terrenos (preço, localização, solo, topografia, legislação)</li>
                        <li>Seleção de fundações (custo, rapidez, segurança)</li>
                        <li>Comparação de materiais (custo, durabilidade, disponibilidade)</li>
                        <li>Contratação de empreiteiras (preço, prazo, qualidade)</li>
                    </ul>
                </div>
                <div class="card">
                    <h3><i data-feather="smartphone"></i> Como usar o simulador</h3>
                    <ol>
                        <li>Na aba <strong>Simulador</strong>, você pode adicionar ou remover critérios e terrenos.</li>
                        <li>Defina os <strong>pesos</strong> (em %) para cada critério. A soma deve ser 100%.</li>
                        <li>Atribua <strong>notas</strong> de 0 a 10 para cada par critério-terreno.</li>
                        <li>Os gráficos e o ranking atualizam automaticamente.</li>
                        <li>Você pode <strong>editar os nomes</strong> clicando no ícone <i data-feather="edit-2" width="16" height="16"></i> ao lado de cada critério ou terreno.</li>
                        <li>Exporte um <strong>relatório em PDF</strong> ou <strong>planilha Excel (XLSX)</strong> com os dados da análise.</li>
                    </ol>
                </div>
            </section>
        </div>

        <!-- Conteúdo da aba Simulador -->
        <div id="simulator-content" class="tab-content">
            <section class="simulator">
                <h2><i data-feather="tool"></i> Simulador dinâmico</h2>
                <p class="simulator-intro">Adicione, remova ou edite critérios e terrenos. Ajuste pesos e notas.</p>

                <!-- Painel de gerenciamento de critérios -->
                <div class="manager-panel">
                    <h3><i data-feather="list"></i> Critérios</h3>
                    <div id="criteria-list" class="dynamic-list"></div>
                    <button id="add-criterion" class="btn btn-secondary" title="Adicionar novo critério"><i data-feather="plus"></i> Adicionar critério</button>
                </div>

                <!-- Painel de gerenciamento de terrenos -->
                <div class="manager-panel">
                    <h3><i data-feather="map-pin"></i> Terrenos</h3>
                    <div id="terrains-list" class="dynamic-list"></div>
                    <button id="add-terrain" class="btn btn-secondary" title="Adicionar novo terreno"><i data-feather="plus"></i> Adicionar terreno</button>
                </div>

                <!-- Aviso de soma dos pesos -->
                <div id="weight-warning" class="warning hidden"></div>

                <!-- Tabela de notas -->
                <div class="scores-panel">
                    <h3><i data-feather="edit-3"></i> Notas (0 a 10)</h3>
                    <div class="scores-table-wrapper">
                        <table id="scores-table">
                            <thead id="scores-thead"></thead>
                            <tbody id="scores-tbody"></tbody>
                        </table>
                    </div>
                </div>

                <!-- Resultados -->
                <div class="results-panel">
                    <h3><i data-feather="bar-chart-2"></i> Resultado da Ponderação</h3>
                    <div class="ranking">
                        <h4><i data-feather="award"></i> Pontuação final</h4>
                        <div id="ranking-list" class="ranking-list"></div>
                    </div>
                    <div class="charts">
                        <div class="chart-container">
                            <canvas id="bar-chart"></canvas>
                        </div>
                        <div class="chart-container">
                            <canvas id="radar-chart"></canvas>
                        </div>
                    </div>
                    <div class="export-buttons">
                        <button id="export-pdf" class="btn btn-primary" title="Exportar relatório em PDF"><i data-feather="file-text"></i> PDF</button>
                        <button id="export-xlsx" class="btn btn-primary" title="Exportar dados para Excel"><i data-feather="file"></i> Excel (XLSX)</button>
                    </div>
                </div>
            </section>
        </div>
        <!-- Conteúdo da aba Guia de Uso -->
        <div id="guide-content" class="tab-content">
            <section class="guide-section">
                <h2><i data-feather="help-circle"></i> Guia de Uso</h2>
                <div class="card">
                    <h3>Passo a passo</h3>
                    <ol>
                        <li><strong>Defina os critérios</strong> – Adicione ou remova critérios relevantes para sua decisão (ex: preço, localização).</li>
                        <li><strong>Atribua pesos</strong> – Dê a importância de cada critério (a soma deve ser 100%).</li>
                        <li><strong>Cadastre os terrenos</strong> – Nomeie cada opção (ex: Terreno A, Lote 5).</li>
                        <li><strong>Atribua notas</strong> – Para cada critério e terreno, dê uma nota de 0 a 10. Você pode usar valores brutos e normalizar (veja exemplos).</li>
                        <li><strong>Analise os resultados</strong> – O gráfico de barras mostra a pontuação final; o radar compara os perfis.</li>
                        <li><strong>Exporte</strong> – Gere um relatório em PDF ou planilha Excel.</li>
                    </ol>
                </div>
                <div class="card">
                    <h3><i data-feather="bar-chart-2"></i> Interpretação dos gráficos</h3>
                    <p><strong>Gráfico de barras:</strong> Quanto maior a barra, melhor a opção segundo seus pesos.</p>
                    <p><strong>Gráfico radar:</strong> Mostra o desempenho em cada critério. Um polígono mais "cheio" indica equilíbrio.</p>
                </div>
                <div class="card">
                    <h3><i data-feather="rotate-cw"></i> Normalização de valores</h3>
                    <p>Se você tem valores brutos (ex: preço em R$/m²), pode convertê-los para notas de 0 a 10 automaticamente. Na aba <strong>Exemplos</strong> há uma demonstração.</p>
                </div>
            </section>
        </div>
        
        <!-- Conteúdo da aba Exemplos -->
        <div id="examples-content" class="tab-content">
            <section class="examples-section">
                <h2><i data-feather="folder"></i> Exemplos Práticos</h2>
                <div class="card">
                    <h3>Exemplo 1: Compra de terreno (com normalização)</h3>
                    <p>Critérios: Preço (menor melhor), Localização (maior melhor), Topografia (maior melhor).</p>
                    <p><strong>Valores brutos:</strong></p>
                    <ul>
                        <li>Terreno A: Preço R$ 1300/m², Localização 8 (nota subjetiva), Topografia 7</li>
                        <li>Terreno B: Preço R$ 1700/m², Localização 9, Topografia 6</li>
                    </ul>
                    <p>Após normalização do preço (min 1300, max 1700), as notas viram:</p>
                    <ul>
                        <li>Terreno A: Preço = 10, Localização 8, Topografia 7 → ponderado (ex: pesos 50%,30%,20%) = 8,9</li>
                        <li>Terreno B: Preço = 0, Localização 9, Topografia 6 → ponderado = 3,9</li>
                    </ul>
                    <button id="load-example-1" class="btn btn-secondary"><i data-feather="upload"></i> Carregar este exemplo</button>
                </div>
                <div class="card">
                    <h3>Exemplo 2: Escolha de fundação</h3>
                    <p>Comparação entre Estaca, Sapata e Radier com critérios: Custo, Rapidez, Segurança.</p>
                    <button id="load-example-2" class="btn btn-secondary"><i data-feather="upload"></i> Carregar este exemplo</button>
                </div>
            </section>
        </div>

        <footer>
            <p>© 2026 PonderaCivil · Ferramenta livre e educativa</p>
        </footer>
    </div>

    <script src="js/script.js"></script>
</body>
</html>
